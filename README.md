# DoY Data Inventory

Dynamics of Youth (DoY) has the ambition to make all projects within the strategic theme as FAIR (Findable, Accessible, Interoperable, Reusable) as possible.

As a short-term goal, we chose to build a lightweight overview of data available within DoY — including both published and unpublished datasets.

This repository hosts the code, metadata templates, and content used to publish the DoY Data Inventory at https://utrechtuniversity.github.io/doy-data-inventory/

## Repository Structure

```
/
├── posts/                    # One folder per study (each becomes a webpage/blogpost)
│   └── example-study/
│        ├── index.qmd        # Quarto page for that study
│        └── example-study.xlsx   # Excel metadata file for that study
│
├── templates/                # Template Excel metadata files + template study page
│   ├── template-metadata.xlsx
│   └── template-index.qmd
│
├── docs/                     # Rendered website (generated by Quarto)
│
├── styles/                   # CSS or styling support
│
├── scripts/                  # Optional helper scripts (R)
│
├── index.qmd                 # Website homepage
├── about.qmd                 # About the DoY Data Inventory
├── _quarto.yml               # Quarto configuration (blog-style site)
├── DoY-Data-Inventory.Rproj  # R project file
└── LICENSE.md
```

## Required Tools

To work with this repository, you will need:

- **Excel**: to complete the metadata templates
- **R**: for running helper code
- **Quarto**: to preview and build the website
- **Git & GitHub**: to clone, update, and redeploy the site

### Installation

Most (if not all) the tools are available from the UU Software Center.

- **R**: https://cran.r-project.org/
- **RStudio**: https://posit.co/download/rstudio-desktop/
- **Quarto**: https://quarto.org
- **Git**: https://git-scm.com

## Getting Started

1. Clone the repository

```
git clone https://github.com/UtrechtUniversity/doy-data-inventory.git
cd doy-data-inventory
```

2. Open the project in RStudio

Double-click the following file: `DoY-Data-Inventory.Rproj`
This loads the project with the correct working directory.

3. Adding a New Study

Each study corresponds to a blogpost in the Quarto website.

_Step 1_ — Create a new folder

Inside the `posts/` directory, create a new folder named after your study:

```
posts/my-new-study/
```

_Step 2_ — Copy the templates

Copy the following files from the `templates/` folder into your new study folder:

- `template-metadata.xlsx` → rename to `my-new-study.xlsx`
- `template-index.qmd` → rename to `index.qmd`

Your study folder will look like this:

```
posts/my-new-study/
├── index.qmd
└── my-new-study.xlsx
```

_Step 3_ — Fill in the metadata Excel file

The Excel template follows the metadata forms on DataverseNL. 
At a minimum, complete:

- Citation Metadata
- Dataset Terms
- Restricted Files + Terms of Access

The remaining fields may be completed based on faculty or project requirements. 
Generally, Social Sciences & Humanities fields are often relevant for DoY studies.
Some sections and fields may be redundant for the study at hand, please use your discretion in determining this.

So far, we have filled out the Excel sheets in collaboration with the researcher. 
It should be possible for researchers to complete the metadata themselves, but some metadata-related jargon might elicit confusion. 
For example, "Universe" which really just refers to the sample.

_Step 4_ — Link the Excel file in `index.qmd`

Open: `posts/my-new-study/index.qmd`

Update the R code so it reads your Excel metadata file. For example:

`my_new_study_metadata <- readxl::read_excel("my-new-study.xlsx")`

_Step 5_ — Adjust row references

Each code chunk inside `index.qmd` extracts specific rows from the Excel file, corresponding to metadata section. 
Adjust the row numbers so that each part of the page displays the correct metadata.

You can also delete code chunks that are not required.

## Previewing the Website

- To preview the entire website, type the following in the **Terminal** of RStudio:

`quarto preview`

- To preview just the new study page:

`quarto preview posts/my-new-study/index.qmd`

Both options open a live preview in your browser.

## Rendering the Website

When you are satisfied with the preview, rebuild the full site by typing the following in the Terminal:

`quarto render`

This regenerates all HTML pages and places them in the `docs/` folder.

At the moment, GitHub Pages automatically uses the `docs/` folder to host the website.
We can update the repository to render the website automatically upon committing changes in `posts/` - this would eliminate a step in the workflow.

## Deploying the Updated Website

Commit and push your updates:

```
git add .
git commit -m "Add new study: my-new-study"
git push
```

GitHub Pages will automatically redeploy the website.

## Reference

For more information on Quarto Websites & Blogs, please refer to the extensive documentation: https://quarto.org/docs/websites/ & https://quarto.org/docs/websites/website-blog.html
